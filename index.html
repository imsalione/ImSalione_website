<!-- =======================================================
üåê ImSalione Portfolio (2025 Modular Version)
Author: Saleh Abedinezhad
=======================================================
Structure:
- Responsive glass-grid layout (Intro, Timeline, Skills, Projects)
- Dynamic JSON content loading
- FAB controller for theme & language
- NEW: Progressive Skill Tree synchronized with Timeline
‚úÖ FIXED: Chart.js added, theme loading fixed
======================================================= -->
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="ImSalione | Portfolio of Saleh Abedinezhad ‚Äì Data Engineering & AI Projects" />
  <meta name="author" content="Saleh Abedinezhad" />
  <title>ImSalione | Portfolio</title>

  <!-- üß© Normalize & Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous">

  <!-- Foundation -->
  <link rel="stylesheet" href="css/base.css">

  <!-- ‚úÖ FIXED: Only load dark theme by default (light will be loaded dynamically by main.js) -->
  <link rel="stylesheet" href="css/themes/dark.css" id="theme-css-link">
  
  <!-- Palette-colors -->
  <link rel="stylesheet" href="css/themes/palette-system.css">

  <!-- Layout & Components -->
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/fab.css">
  <link rel="stylesheet" href="css/github-contrib.css">

  <!-- Sections -->
  <link rel="stylesheet" href="css/sections/section-intro.css">
  <link rel="stylesheet" href="css/sections/section-timeline.css">
  <link rel="stylesheet" href="css/sections/section-skills.css">
  <link rel="stylesheet" href="css/sections/section-projects.css">

</head>

<body data-theme="dark" data-theme-style="default">

  <!-- =======================================================
  üß± MAIN GRID
  ======================================================= -->
  <main class="page-grid">

    <!-- üßë Intro -->
    <section id="section-intro" class="glass-panel"></section>

    <!-- ‚è≥ Timeline + Skills -->
    <section id="section-timeline-skills" class="glass-panel">
      <div class="timeline-container"></div>
      <div class="skills-container"></div>
    </section>

    <!-- üíº Projects -->
    <section id="section-projects" class="glass-panel"></section>

  </main>

  <!-- =======================================================
  ‚öôÔ∏è FAB CONTAINER
  ======================================================= -->
  <div id="fab-container">
    <div id="fab-placeholder"></div>
  </div>

  <!-- =======================================================
  üìú JAVASCRIPT FILES (ORDER MATTERS!)
  ======================================================= -->

  <!-- ‚úÖ 0. CRITICAL: Chart.js MUST be loaded FIRST for GitHub chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" crossorigin="anonymous"></script>

  <!-- 1. Core Configuration -->
  <script src="js/config.js"></script>
  <script src="js/eventHub.js"></script>
  <script src="js/utils.js"></script>
  
  <!-- 2. Core Modules -->
  <script src="js/core/router.js"></script>
  <script src="js/core/dom-manager.js"></script>
  
  <!-- 3. Main Controller -->
  <script src="js/main.js"></script>
  
  <!-- 4. Components (GitHub module needs Chart.js) -->
  <script src="js/fab.js"></script>
  <script src="js/github-contrib.js"></script>
  
  <!-- 5. Sections -->
  <script src="js/sections/section-intro.js"></script>
  <script src="js/sections/section-timeline.js"></script>
  <script src="js/sections/section-skills.js"></script>
  <script src="js/sections/section-projects.js"></script>

  <!-- 6Ô∏è‚É£ Load FAB (dynamic for static hosting) -->
  <script>
    (function loadFAB() {
      fetch("partials/fab.html")
        .then(r => r.text())
        .then(html => {
          const placeholder = document.getElementById("fab-placeholder");
          if (placeholder) {
            placeholder.innerHTML = html;
            if (typeof initFabMenu === "function") {
              initFabMenu();
              console.log("‚úÖ FAB initialized");
            }
          }
        })
        .catch(err => {
          console.warn("‚ö†Ô∏è FAB could not be loaded:", err);
        });
    })();
  </script>

  <!-- 7Ô∏è‚É£ Error Handler -->
  <script>
    window.addEventListener('error', (e) => {
      console.error('üî¥ Runtime Error:', e.error);
      console.error('File:', e.filename);
      console.error('Line:', e.lineno, 'Column:', e.colno);
    });

    window.addEventListener('unhandledrejection', (e) => {
      console.error('üî¥ Unhandled Promise Rejection:', e.reason);
    });
  </script>

  <!-- ‚úÖ 8Ô∏è‚É£ Chart.js Verification (for debugging) -->
  <script>
    if (typeof Chart !== 'undefined') {
      console.log('%c‚úÖ Chart.js loaded successfully', 'color:#00ff88;font-weight:bold;');
      console.log('   Version:', Chart.version);
    } else {
      console.error('‚ùå Chart.js failed to load!');
    }
  </script>

</body>
</html>