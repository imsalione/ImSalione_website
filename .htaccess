# ==========================================================
# üåê ImSalione Portfolio Configuration (.htaccess)
# ==========================================================

# -------------------------------
# ‚úÖ Basic setup
# -------------------------------
Options -Indexes
DirectoryIndex index.html

# Force UTF-8 for all text files
AddDefaultCharset UTF-8

# -------------------------------
# ‚úÖ JSON & XML MIME types
# -------------------------------
AddType application/json .json
AddType application/xml .xml

# Ensure correct CORS for JSON (so JS can fetch it)
<FilesMatch "\.(json|xml)$">
  Header set Access-Control-Allow-Origin "*"
  Header set Access-Control-Allow-Methods "GET, OPTIONS"
  Header set Access-Control-Allow-Headers "Content-Type"
</FilesMatch>

# -------------------------------
# ‚úÖ Browser Caching (recommended)
# -------------------------------
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresDefault "access plus 30 days"
  ExpiresByType text/html "access plus 1 hour"
  ExpiresByType text/css "access plus 7 days"
  ExpiresByType application/javascript "access plus 7 days"
  ExpiresByType image/jpeg "access plus 30 days"
  ExpiresByType image/png "access plus 30 days"
  ExpiresByType image/svg+xml "access plus 30 days"
  ExpiresByType application/json "access plus 1 hour"
</IfModule>

# -------------------------------
# ‚úÖ Disable caching for development
# (comment out in production)
# -------------------------------
# <FilesMatch "\.(html|css|js|json)$">
#   Header set Cache-Control "no-cache, no-store, must-revalidate"
#   Header set Pragma "no-cache"
#   Header set Expires 0
# </FilesMatch>

# -------------------------------
# ‚úÖ Security: deny access to system files
# -------------------------------
<FilesMatch "(\.env|\.git|composer\.json|composer\.lock)$">
  Order allow,deny
  Deny from all
</FilesMatch>

# -------------------------------
# ‚úÖ Redirect to HTTPS (optional)
# -------------------------------
# RewriteEngine On
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# -------------------------------
# ‚úÖ Pretty URLs (optional, for future backend)
# -------------------------------
# RewriteEngine On
# RewriteCond %{REQUEST_FILENAME} !-f
# RewriteCond %{REQUEST_FILENAME} !-d
# RewriteRule ^(.*)$ index.html [QSA,L]
